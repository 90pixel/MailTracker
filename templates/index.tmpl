<!doctype html>
<html lang="en" data-bs-theme="auto">
<head>
    <script src="/assets/js/color-modes.js"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Tamer Agaoglu">
    <title>{{ .title }}</title>
    <link href="/assets/css/bootstrap.custom.css" rel="stylesheet">
    <link href="/assets/css/style.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="/assets/css/sidebars.css" rel="stylesheet">
    <link href="/assets/libs/awesome-notifications/style.css" rel="stylesheet">
    <!-- Favicon Set -->
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
    <link rel="manifest" href="/assets/favicon/site.webmanifest">
    <link rel="shortcut icon" href="/assets/favicon/favicon.ico">
    <!-- bower -->
    <link rel="stylesheet" href="/assets/libs/highlight/styles/dark.min.css">
    <link rel="stylesheet" href="/assets/libs/highlight/styles/agate.min.css">

</head>
<body>
<div class="toploader">
    <div class="loaderBar bg-light"></div>
</div>
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="check2" viewBox="0 0 16 16">
        <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/>
    </symbol>
    <symbol id="circle-half" viewBox="0 0 16 16">
        <path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"/>
    </symbol>
    <symbol id="moon-stars-fill" viewBox="0 0 16 16">
        <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
        <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/>
    </symbol>
    <symbol id="sun-fill" viewBox="0 0 16 16">
        <path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
    </symbol>
</svg>

<div class="dropdown position-fixed bottom-0 end-0 mb-3 me-3 bd-mode-toggle">
    <button class="btn btn-bd-primary py-2 dropdown-toggle d-flex align-items-center"
            id="bd-theme"
            type="button"
            aria-expanded="false"
            data-bs-toggle="dropdown"
            aria-label="Toggle theme (auto)">
        <svg class="bi my-1 theme-icon-active" width="1em" height="1em">
            <use href="#circle-half"></use>
        </svg>
        <span class="visually-hidden" id="bd-theme-text">Toggle theme</span>
    </button>
    <ul class="dropdown-menu dropdown-menu-end shadow" aria-labelledby="bd-theme-text">
        <li>
            <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="light"
                    aria-pressed="false">
                <svg class="bi me-2 opacity-50 theme-icon" width="1em" height="1em">
                    <use href="#sun-fill"></use>
                </svg>
                Light
                <svg class="bi ms-auto d-none" width="1em" height="1em">
                    <use href="#check2"></use>
                </svg>
            </button>
        </li>
        <li>
            <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark"
                    aria-pressed="false">
                <svg class="bi me-2 opacity-50 theme-icon" width="1em" height="1em">
                    <use href="#moon-stars-fill"></use>
                </svg>
                Dark
                <svg class="bi ms-auto d-none" width="1em" height="1em">
                    <use href="#check2"></use>
                </svg>
            </button>
        </li>
        <li>
            <button type="button" class="dropdown-item d-flex align-items-center active" data-bs-theme-value="auto"
                    aria-pressed="true">
                <svg class="bi me-2 opacity-50 theme-icon" width="1em" height="1em">
                    <use href="#circle-half"></use>
                </svg>
                Auto
                <svg class="bi ms-auto d-none" width="1em" height="1em">
                    <use href="#check2"></use>
                </svg>
            </button>
        </li>
    </ul>
</div>


<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">

    <svg viewbox="0 0 32 32" id="home">
        <path d="M31 29.4h-2.5V15.6a1.2 1.2 0 0 0-0.5-1L16.8 5.4a1.3 1.3 0 0 0-1.6 0L4 14.6a1.2 1.2 0 0 0-0.4 1v13.8H1V15.6a3.7 3.7 0 0 1 1.4-2.9l11.2-9.2a3.8 3.8 0 0 1 4.8 0l11.2 9.2a3.7 3.7 0 0 1 1.4 2.9z"/>
        <path d="M22.1 24.2H19.6A3.4 3.4 0 0 0 16 21a3.4 3.4 0 0 0-3.6 3.2H10a6 6 0 0 1 6-5.7 6 6 0 0 1 6.1 5.7z m-12.2 0H12.4v5.2H9.9z m9.7 0h2.5v5.2H19.6z"/>
    </svg>

    <svg viewbox="0 0 32 32" id="users">
        <path d="M10.2 15.9A5.7 5.7 0 0 0 15.7 10 5.8 5.8 0 0 0 10.2 4a5.8 5.8 0 0 0-5.6 6A5.8 5.8 0 0 0 10.2 15.9z m0-9.4A3.2 3.2 0 0 1 13.2 10 3.3 3.3 0 0 1 10.2 13.4 3.3 3.3 0 0 1 7.2 10 3.2 3.2 0 0 1 10.2 6.5z m14.4 10.1a4.8 4.8 0 0 0 4.6-4.9 4.8 4.8 0 0 0-4.6-4.9A4.8 4.8 0 0 0 20 11.7a4.8 4.8 0 0 0 4.6 4.9z m0-7.3a2.3 2.3 0 0 1 2.1 2.4 2.3 2.3 0 0 1-2.1 2.4 2.3 2.3 0 0 1-2.1-2.4 2.3 2.3 0 0 1 2.1-2.4z m-0.2 9.8a7.7 7.7 0 0 0-6.1 3A10.4 10.4 0 0 0 10.2 18.4 10 10 0 0 0 0 28h2.5a7.4 7.4 0 0 1 7.7-7.1A7.4 7.4 0 0 1 17.9 28h2.5a9 9 0 0 0-0.7-3.4 5.1 5.1 0 0 1 4.7-3 4.9 4.9 0 0 1 5.1 4.7V28H32v-1.7a7.4 7.4 0 0 0-7.6-7.2z"/>
    </svg>

    <svg viewbox="0 0 32 32" id="setting-icon">
        <path d="M1.3 22.2z m0.4 0.8v-0.2z m0.4 0.7L2 23.4zM2 23.4l-0.2-0.4z m-0.4-0.6c-0.1-0.2-0.2-0.4-0.3-0.6 0.1 0.2 0.2 0.4 0.3 0.6z m0.6 1.1v-0.2z"/>
        <path d="M22.5 25.3l3.7 2.1a14.7 14.7 0 0 0 2-1.8 15 15 0 0 0 3.1-5.8l-3.5-2A10.6 10.6 0 0 0 28 16a10.6 10.6 0 0 0-0.2-1.8l3.5-2a14.9 14.9 0 0 0-2.6-5.2 15.1 15.1 0 0 0-2.5-2.4l-3.7 2.1a12 12 0 0 0-2.2-1.1v-4A17.1 17.1 0 0 0 15.9 1.1a16.8 16.8 0 0 0-4.5 0.6v4a14.5 14.5 0 0 0-2.3 1L5.6 4.6A14.9 14.9 0 0 0 0.4 12.1l3.4 2a10.6 10.6 0 0 0-0.1 1.8 10.6 10.6 0 0 0 0.1 1.8l-3.4 2a16 16 0 0 0 0.8 2.3c0.1 0.2 0.2 0.4 0.4 0.6v0.2l0.2 0.4 0.2 0.4v0.1a15.4 15.4 0 0 0 3.3 3.6l3.6-2.2a14.5 14.5 0 0 0 2.3 1.1v4a16.8 16.8 0 0 0 4.5 0.6 17.1 17.1 0 0 0 4.4-0.6v-4a12 12 0 0 0 2.4-0.9z m-4.8 3a15.1 15.1 0 0 1-1.9 0.1 15.5 15.5 0 0 1-2-0.1v-3.4a9.8 9.8 0 0 1-5-2.5l-3.1 1.8a12.4 12.4 0 0 1-2.2-3.2l3.2-1.9a8.5 8.5 0 0 1 0-6.3l-3.2-1.8a12.2 12.2 0 0 1 2.3-3.3l3.1 1.9A10 10 0 0 1 14 7.1V3.6a15.5 15.5 0 0 1 2-0.1 15.1 15.1 0 0 1 1.9 0.1v3.5a9.8 9.8 0 0 1 4.8 2.5l3.2-1.9a12.6 12.6 0 0 1 2.2 3.3l-3.2 1.8a8.7 8.7 0 0 1 0.6 3.2 8.9 8.9 0 0 1-0.6 3.1l3.1 1.9a12.9 12.9 0 0 1-2.2 3.2l-3.1-1.9a10 10 0 0 1-5 2.6z"/>
        <path d="M15.8 11A5.2 5.2 0 0 0 10.5 16a5.2 5.2 0 0 0 5.3 5A5.2 5.2 0 0 0 21.2 16a5.2 5.2 0 0 0-5.4-5zM16 18.4A2.7 2.7 0 0 1 13.1 16 2.7 2.7 0 0 1 16 13.4 2.7 2.7 0 0 1 18.8 16 2.7 2.7 0 0 1 16 18.4z"/>
    </svg>

</svg>

<div id="login" style="display:none;">
    <main class="d-flex flex-nowrap">


        <!-- Login username and password form screen-->
        <div class="d-flex flex-column flex-shrink-0 bg-primary position-relative d-none d-md-flex "
             style="width: 35%;">
            <div class="dotm-overlay z-0">
                <svg width="100%" height="100%">
                    <defs>
                        <pattern id="polka-dots" x="0" y="0" width="100" height="100" patternUnits="userSpaceOnUse">
                            <circle id="pattern-circle" cx="2" cy="2" r="1.6257413380501518" fill="#FFF"
                                    opacity="0.2"></circle>
                        </pattern>
                    </defs>
                    <rect x="0" y="0" width="100%" height="100%" fill="url(#polka-dots)"></rect>
                </svg>
            </div>
            <div class="w-100 h-100 text-center d-none d-md-flex text-white align-items-center d-flex justify-content-center position-relative z-1">
                <svg width="20%" height="12%" viewBox="0 0 88 53" xmlns="http://www.w3.org/2000/svg">
                    <path d="M87.6842 41.6842V46.8947C85.8789 46.8947 83.8158 47.9368 81.4947 49.2395C78.9158 50.5421 76.0789 52.1053 72.9842 52.1053C69.8895 52.1053 67.0526 50.5421 64.4737 49.2395C62.1526 47.9368 60.0895 46.8947 58.2842 46.8947C56.4789 46.8947 54.4158 47.9368 52.0947 49.2395C49.5158 50.5421 46.6789 52.1053 43.5842 52.1053C40.4895 52.1053 37.6526 50.5421 35.0737 49.2395C33.0105 47.9368 30.9474 46.8947 29.1421 46.8947C27.3368 46.8947 25.2737 47.9368 22.9526 49.2395C20.3737 50.5421 17.5368 52.1053 14.4421 52.1053C11.3474 52.1053 8.51053 50.5421 5.93158 49.2395C3.86842 47.9368 1.80526 46.8947 0 46.8947V41.6842C1.80526 41.6842 3.61053 42.2053 5.15789 42.9868V18.4974L10.3158 22.6658V45.5921C11.8632 46.3737 13.4105 46.8947 14.7 46.8947C16.5053 46.8947 18.5684 45.8526 20.8895 44.55C23.4684 43.2474 26.3053 41.6842 29.4 41.6842C32.4947 41.6842 35.3316 43.2474 37.9105 44.55C40.2316 45.8526 42.2947 46.8947 44.1 46.8947C45.9053 46.8947 47.9684 45.8526 50.2895 44.55C52.8684 43.2474 55.7053 41.6842 58.8 41.6842C61.8947 41.6842 64.7316 43.2474 67.3105 44.55C69.6316 45.8526 71.6947 46.8947 73.5 46.8947C74.7895 46.8947 76.3368 46.3737 77.8842 45.5921V16.1526L47.4526 40.6421C46.1632 41.1632 45.1316 41.6842 43.8421 41.6842C42.5526 41.6842 41.521 41.1632 40.7474 40.6421L5.15789 11.9842V5.21053C5.15789 2.34474 7.47895 0 10.3158 0H77.3684C80.2053 0 82.5263 2.34474 82.5263 5.21053V42.9868C84.0737 42.2053 85.8789 41.6842 87.6842 41.6842ZM77.3684 9.37895V5.21053H10.3158V9.37895L43.8421 36.4737L77.3684 9.37895Z"
                          fill="#FFF"/>
                </svg>
                <h1 class="p-3">MailTracker</h1>
            </div>
        </div>
        <div class="b-example-divider b-example-vr" style="width: 5%"></div>
        <div class="d-flex flex-column flex-shrink-0 p-3 bg-body" style="width: 60%;">
            <div class="d-block w-100 h-100 text-white align-items-center justify-content-center position-relative z-1">
                <form action="#" method="post" id="login-form" class="p-4 w-70"
                      style="margin-top: 45vh; transform: translateY(-50%);">
                    <h3 class="mb-4">Giriş Yap</h3>
                    <div class="mb-3">
                        <label for="login_username" class="form-label">Kullanıcı Adı</label>
                        <input type="text" class="form-control" id="login_username" name="username"
                               placeholder="Kullanıcı Adı">
                    </div>
                    <div class="mb-3">
                        <label for="login_password" class="form-label">Şifre</label>
                        <input type="password" class="form-control" id="login_password" name="login_password"
                               placeholder="Şifre">
                    </div>
                    <button type="submit" class="btn mt-4 btn-primary">Giriş Yap</button>
                </form>
            </div>
        </div>
    </main>
</div>

<div id="main" style="display:none;">
    <main class="d-flex flex-nowrap">

        <div class="d-flex flex-column permission-field admin flex-shrink-0 bg-body-tertiary" style="width: 4.5rem;">
            <a href="/" class="d-block p-3 text-center link-body-emphasis text-decoration-none" title="{{ .title }}"
               data-bs-toggle="tooltip" data-bs-placement="right">
                <svg width="32" stroke="currentColor" height="19" viewBox="0 0 88 53" fill="currentColor"
                     xmlns="http://www.w3.org/2000/svg">
                    <path d="M87.6842 41.6842V46.8947C85.8789 46.8947 83.8158 47.9368 81.4947 49.2395C78.9158 50.5421 76.0789 52.1053 72.9842 52.1053C69.8895 52.1053 67.0526 50.5421 64.4737 49.2395C62.1526 47.9368 60.0895 46.8947 58.2842 46.8947C56.4789 46.8947 54.4158 47.9368 52.0947 49.2395C49.5158 50.5421 46.6789 52.1053 43.5842 52.1053C40.4895 52.1053 37.6526 50.5421 35.0737 49.2395C33.0105 47.9368 30.9474 46.8947 29.1421 46.8947C27.3368 46.8947 25.2737 47.9368 22.9526 49.2395C20.3737 50.5421 17.5368 52.1053 14.4421 52.1053C11.3474 52.1053 8.51053 50.5421 5.93158 49.2395C3.86842 47.9368 1.80526 46.8947 0 46.8947V41.6842C1.80526 41.6842 3.61053 42.2053 5.15789 42.9868V18.4974L10.3158 22.6658V45.5921C11.8632 46.3737 13.4105 46.8947 14.7 46.8947C16.5053 46.8947 18.5684 45.8526 20.8895 44.55C23.4684 43.2474 26.3053 41.6842 29.4 41.6842C32.4947 41.6842 35.3316 43.2474 37.9105 44.55C40.2316 45.8526 42.2947 46.8947 44.1 46.8947C45.9053 46.8947 47.9684 45.8526 50.2895 44.55C52.8684 43.2474 55.7053 41.6842 58.8 41.6842C61.8947 41.6842 64.7316 43.2474 67.3105 44.55C69.6316 45.8526 71.6947 46.8947 73.5 46.8947C74.7895 46.8947 76.3368 46.3737 77.8842 45.5921V16.1526L47.4526 40.6421C46.1632 41.1632 45.1316 41.6842 43.8421 41.6842C42.5526 41.6842 41.521 41.1632 40.7474 40.6421L5.15789 11.9842V5.21053C5.15789 2.34474 7.47895 0 10.3158 0H77.3684C80.2053 0 82.5263 2.34474 82.5263 5.21053V42.9868C84.0737 42.2053 85.8789 41.6842 87.6842 41.6842ZM77.3684 9.37895V5.21053H10.3158V9.37895L43.8421 36.4737L77.3684 9.37895Z"/>
                </svg>

                <span class="visually-hidden">Icon-only</span>
            </a>
            <ul class="nav nav-pills nav-flush flex-column mb-auto text-center" id="left-menu">
                <li class="nav-item">
                    <a href="section-mail" class="nav-link active py-3 border-bottom  rounded-0" aria-current="page"
                       title="Gelen Kutusu"
                       data-bs-toggle="tooltip" data-bs-placement="right">
                        <svg class="bi pe-none" width="24" height="24" role="img" aria-label="Gelen Kutusu">
                            <use xlink:href="#home"/>
                        </svg>
                    </a>
                </li>
                <li>
                    <a href="section-user" class="nav-link py-3 border-bottom rounded-0" title="Kullanıcılar"
                       data-bs-toggle="tooltip"
                       data-bs-placement="right">
                        <svg class="bi pe-none" width="24" height="24" role="img" aria-label="Kullanıcılar">
                            <use xlink:href="#users"/>
                        </svg>
                    </a>
                </li>
                <li>
                    <a href="section-settings" class="nav-link py-3 border-bottom rounded-0" title="Ayarlar"
                       data-bs-toggle="tooltip"
                       data-bs-placement="right">
                        <svg class="bi pe-none" width="24" height="24" role="img" aria-label="Ayarlar">
                            <use xlink:href="#setting-icon"/>
                        </svg>
                    </a>
                </li>
            </ul>
            <div class="dropdown border-top">
                <a href="#"
                   class="d-flex align-items-center justify-content-center p-3 link-body-emphasis text-decoration-none dropdown-toggle"
                   data-bs-toggle="dropdown" aria-expanded="false">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 64 64" version="1.1"><circle fill="#e76f51" width="64" height="64" cx="32" cy="32" r="32"/><text x="50%" y="50%" style="color: #ffffff;line-height: 1;font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;" alignment-baseline="middle" text-anchor="middle" font-size="26" font-weight="400" dy=".1em" dominant-baseline="middle" fill="#ffffff" class="avatar-text">AB</text></svg>
                </a>
                <ul class="dropdown-menu text-small shadow">
                    <li><a class="dropdown-item" href="#">Profil</a></li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li><a class="dropdown-item logout-btn" href="#">Çıkış</a></li>
                </ul>
            </div>
        </div>

        <div class="b-example-divider permission-field admin b-example-vr"></div>

        <div class="section section-mail active d-flex position-relative dj-slider overflow-hidden flex-column align-items-stretch flex-shrink-0 bg-body-tertiary"
             style="width: 380px;">
            <div class="position-relative dj-slide active mail-slide">
                <span class="position-absolute  mt-3" style="right: 1rem; width: 25px; height: 50px"
                      title="Kurulum Rehberi"
                      data-bs-toggle="tooltip" data-bs-placement="bottom">
                   <a href="#settings" id="settings-btn">
          <svg viewbox="0 0 32 32" width="20" height="20" stroke="currentColor" fill="currentColor"><path
                      d="M5.3 28L5.3 18.7" fill="none" stroke-width="2.6666666666666665" stroke-linecap="round"
                      stroke-linejoin="round"/><path d="M5.3 13.3L5.3 4" fill="none" stroke-width="2.6666666666666665"
                                                     stroke-linecap="round" stroke-linejoin="round"/><path
                      d="M16 28L16 16" fill="none" stroke-width="2.6666666666666665" stroke-linecap="round"
                      stroke-linejoin="round"/><path d="M16 10.7L16 4" fill="none" stroke-width="2.6666666666666665"
                                                     stroke-linecap="round" stroke-linejoin="round"/><path
                      d="M26.7 28L26.7 21.3" fill="none" stroke-width="2.6666666666666665" stroke-linecap="round"
                      stroke-linejoin="round"/><path d="M26.7 16L26.7 4" fill="none" stroke-width="2.6666666666666665"
                                                     stroke-linecap="round" stroke-linejoin="round"/><path
                      d="M1.3 18.7L9.3 18.7" fill="none" stroke-width="2.6666666666666665" stroke-linecap="round"
                      stroke-linejoin="round"/><path d="M12 10.7L20 10.7" fill="none" stroke-width="2.6666666666666665"
                                                     stroke-linecap="round" stroke-linejoin="round"/><path
                      d="M22.7 21.3L30.7 21.3" fill="none" stroke-width="2.6666666666666665" stroke-linecap="round"
                      stroke-linejoin="round"/></svg>
                   </a>
            </span>
                <span class="position-absolute  mt-3" style="right: 3.5rem; width: 25px; height: 50px"
                      title="Yenile"
                      data-bs-toggle="tooltip" data-bs-placement="bottom">
                   <a href="#refresh" id="refresh-btn">
                       <svg viewbox="0 0 32 32" width="20" height="20" stroke="currentColor" fill="currentColor"><path
                                   d="M1.3 5.3L1.3 13.3 9.3 13.3" fill="none" stroke-width="2.6666666666666665"
                                   stroke-linecap="round" stroke-linejoin="round"/><path
                                   d="M30.7 26.7L30.7 18.7 22.7 18.7" fill="none" stroke-width="2.6666666666666665"
                                   stroke-linecap="round" stroke-linejoin="round"/><path
                                   d="M27.3 12A12 12 0 0 0 7.5 7.5L1.3 13.3m29.4 5.4l-6.2 5.8A12 12 0 0 1 4.7 20"
                                   fill="none" stroke-width="2.6666666666666665" stroke-linecap="round"
                                   stroke-linejoin="round"/></svg>
                   </a>
            </span>
                <span class="position-absolute mt-3 d-block" style="right: 5.9rem; width: 25px; height: 50px"
                      title="Tümünü Sil"
                      data-bs-toggle="tooltip" data-bs-placement="bottom">
                  <a href="#delete" id="delete-all-btn">
<svg viewbox="0 0 32 32" width="20" height="20" stroke="currentColor" fill="currentColor"><path d="M4 8L6.7 8 28 8"
                                                                                                fill="none"
                                                                                                stroke-width="2.6666666666666665"
                                                                                                stroke-linecap="round"
                                                                                                stroke-linejoin="round"/><path
            d="M25.3 8v18.7a2.7 2.7 0 0 1-2.6 2.6H9.3a2.7 2.7 0 0 1-2.6-2.6V8m4 0V5.3a2.7 2.7 0 0 1 2.6-2.6h5.4a2.7 2.7 0 0 1 2.6 2.6v2.7"
            fill="none" stroke-width="2.6666666666666665" stroke-linecap="round" stroke-linejoin="round"/><path
            d="M13.3 14.7L13.3 22.7" fill="none" stroke-width="2.6666666666666665" stroke-linecap="round"
            stroke-linejoin="round"/><path d="M18.7 14.7L18.7 22.7" fill="none" stroke-width="2.6666666666666665"
                                           stroke-linecap="round" stroke-linejoin="round"/></svg>


        </a>
            </span>
                <span class="position-absolute mt-3" style="right: 8.5rem; width: 25px; height: 50px"
                      title="Okundu Olarak İşaretle"
                      data-bs-toggle="tooltip" data-bs-placement="bottom">
            <a href="#read-all" id="read-all-btn">
                    <svg viewbox="0 0 32 32" width="25" height="25" stroke="currentColor" fill="currentColor"><path
                                d="M12 14.7L16 18.7 29.3 5.3" fill="none" stroke-width="2.6666666666666665"
                                stroke-linecap="round" stroke-linejoin="round"/><path
                                d="M28 16v9.3a2.7 2.7 0 0 1-2.7 2.7H6.7a2.7 2.7 0 0 1-2.7-2.7V6.7a2.7 2.7 0 0 1 2.7-2.7h14.6"
                                fill="none" stroke-width="2.6666666666666665" stroke-linecap="round"
                                stroke-linejoin="round"/></svg>

                </a>
            </span>
                <span
                        class="d-inline-block p-3 text-decoration-none ">
                <span class="fs-5 fw-semibold">Gelen Kutusu</span>
            </span>

                <div class="list-group list-group-flush border-bottom scrollarea" id="mail-box">


                </div>
            </div>
        </div>

        <div class="section section-mail active b-example-divider b-example-vr"></div>

        <div class="section section-mail active d-flex flex-column flex-shrink-0 flex-grow-1 p-3 bg-body">
            <div id="mail-content">

            </div>
        </div>

        <div class="section section-user d-flex flex-column flex-shrink-0 flex-grow-1 p-3 bg-body">
            <h1 class="h4 mb-4 mt-4">Kullanıcılar</h1>

            <div class="row mb-4">
                <div class="col-10"></div>
                <div class="col-2" style="text-align: right">
                    <a hrwef="#" class="btn btn-primary mb-3 create-new-user" data-bs-toggle="modal">
                        <svg viewbox="0 0 32 32" style="width: 1rem; height:1rem;" stroke="currentColor"
                             fill="currentColor">
                            <path d="M8.3 8.5C8.3 5.5 10.8 3 13.8 3 16.9 3 19.3 5.5 19.3 8.5 19.3 11.5 16.9 14 13.8 14 10.8 14 8.3 11.5 8.3 8.5Z"/>
                            <path d="M4.3 25.5C4.3 20.3 8.6 16 13.8 16 19.1 16 23.3 20.3 23.3 25.5V25.5C23.3 25.6 23.3 25.6 23.3 25.7 23.3 26 23.1 26.3 22.8 26.5 20.2 28.1 17.1 29 13.8 29 10.5 29 7.5 28.1 4.8 26.5 4.5 26.3 4.3 26 4.3 25.7 4.3 25.6 4.3 25.6 4.3 25.5Z"/>
                            <path d="M26.3 10C26.3 9.4 25.9 9 25.3 9 24.8 9 24.3 9.4 24.3 10V13H21.3C20.8 13 20.3 13.4 20.3 14 20.3 14.6 20.8 15 21.3 15H24.3V18C24.3 18.6 24.8 19 25.3 19 25.9 19 26.3 18.6 26.3 18V15H29.3C29.9 15 30.3 14.6 30.3 14 30.3 13.4 29.9 13 29.3 13H26.3V10Z"/>
                        </svg>
                        Kullanıcı Ekle
                    </a>
                </div>
            </div>

            <div id="user-content">

                <div class="card mb-3">
                    <div class="card-body">
                        <table class="table table-striped">
                            <thead>
                            <tr>
                                <th scope="col">Id</th>
                                <th scope="col">Kullanıcı Adı</th>
                                <th scope="col">Rol</th>
                                <th scope="col">Oluşturulma Tarihi</th>
                                <th scope="col" width="200">İşlemler</th>
                            </tr>
                            </thead>
                            <tbody id="user-table">
                            <tr>
                                <td colspan="4" class="p-4" style="text-align: center"> Kayıt Bulunamadı</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>


            </div>
        </div>

        <div class="section section-settings d-flex flex-column flex-shrink-0 flex-grow-1 p-3 bg-body">
            <h1 class="h4 mb-4 mt-4">Ayarlar</h1>

            <div class="row mb-4">
                <div class="col">

                </div>
            </div>
            <div id="settings-content">
                <!-- email yonlendirme -->
                <div class="card mb-3">
                    <div class="card-header">
                        <span>Bildirim Ayarları</span>
                    </div>
                    <div class="card-body">
                        <p>Mailtracker, e-posta yönlendirme işlemini gerçekleştirdiğinizde, yönlendirilen e-posta adresine bildirim gönderir.</p>
                    </div>
                    <div class="card-body">
                        <!-- E-posta yönlendirme Aktif? -->
                        <div class="form-group mb-4">
                            <label for="email-forwarding-enabled" class="form-label">Bildirimler aktif mi?</label>
                            <select class="form-control" id="email-forwarding-enabled">
                                <option value="1">Evet</option>
                                <option value="0">Hayır</option>
                            </select>
                        </div>
                        <!-- E-posta yönlendirme Adresi -->
                        <div class="form-group mb-4">
                            <label for="email-forwarding-address" class="form-label">E-Posta adresi</label>
                            <input type="text" class="form-control" id="email-forwarding-address"
                                   placeholder="E-posta adresi">
                        </div>
                        <!-- E-posta yönlendirme Kaydet -->
                        <button type="button" class="btn btn-primary" id="email-forwarding-save">Kaydet</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="b-example-divider b-example-vr"></div>
    </main>
</div>

<theme id="mailbox-settings" class="d-none">
    <div class="mail-item-content">
        <h1 class="h4 mb-3">SMTP Ayarları</h1>
        <p>Doğrudan e-posta istemcinizden veya posta aktarım aracınızdan mesaj göndermek için bu ayarları kullanın.</p>
        <!-- important note -->
        <div class="alert alert-warning alert-dismissible fade show" role="alert">
            <strong>Not:</strong> Gelen kutunuzun spam ile dolmasına neden olabileceğinden, kullanıcı adınızı veya
            şifrenizi ifşa etmeyin.
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        <hr>
        <p>Mailtracker, SMTP sunucusu olarak çalışır. Bu, e-posta göndermek için bir SMTP sunucusu kullanmanızı
            gerektirdiği anlamına gelir.</p>
        <!-- important note -->

        <div class="row">
            <div class="col-4">
                <div class="card">
                    <div class="card-body">
                        <h5>SMTP</h5>
                        <div class="row">
                            <div class="col-4">Host:</div>
                            <div class="col-8">{{ .host }}</div>
                        </div>
                        <div class="row">
                            <div class="col-4">Port:</div>
                            <div class="col-8">{{ .port }}</div>
                        </div>
                        <div class="row">
                            <div class="col-4">Username:</div>
                            <div class="col-8">{{ .username }}</div>
                        </div>
                        <div class="row">
                            <div class="col-4">Password:</div>
                            <div class="col-8">{{ .password}}</div>
                        </div>
                        <div class="row">
                            <div class="col-4">Auth:</div>
                            <div class="col-8">PLAIN</div>
                        </div>
                        <div class="row">
                            <div class="col-4">TLS:</div>
                            <div class="col-8">Destek Yok</div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="col-8">
                <div class="card">
                    <div class="card-body">
                        <h5>Entegrasyon</h5>

                        <p>Mailtracker, aşağıdaki dil ve kütüphaneler için örnek kodlar sunar.</p>
                        <select class="form-select" id="select-language">
                            <option value="laravel">Laravel</option>
                            <option value="symfony">Symfony</option>
                            <option value="node">Node.js</option>
                            <option value="curl">cURL</option>
                            <option value="django">Django</option>
                        </select>


                        <div class="list-languages mt-4">

                            <div id="laravel">
                                                    <pre style="margin: 0 !important; height: auto !important;"><code>MAIL_MAILER=smtp
MAIL_HOST={{ .host }}
MAIL_PORT={{ .port }}
MAIL_USERNAME={{ .username }}
MAIL_PASSWORD={{ .password}}
MAIL_ENCRYPTION=None</code></pre>
                            </div>
                            <div id="symfony" style="display: none;">
                                <pre style="margin: 0 !important; height: auto !important;"><code>MAILER_DSN=smtp://{{ .username }}:{{ .password}}@{{ .host }}:{{ .port }}?encryption=none&auth_mode=login</code></pre>
                            </div>
                            <div id="node" style="display: none;">
<pre><code>var transport = nodemailer.createTransport({
    host: "{{ .host }}",
    port: {{ .port }},
    auth: {
        user: "{{ .username }}",
        pass: "{{ .password }}"
    }
});</code></pre>
                            </div>
                            <div id="curl" style="display: none;">
                                <textarea class="form-control" rows="8">{{ .curl }}</textarea>
                            </div>
                            <div id="django" style="display: none;">
<pre><code>EMAIL_HOST={{ .host }}
EMAIL_PORT={{ .port }}
EMAIL_HOST_USER={{ .username }}
EMAIL_HOST_PASSWORD={{ .password}}</code></pre>
                            </div>
                        </div>


                    </div>
                </div>
            </div>
        </div>

    </div>
</theme>


<theme id="mail-item-content" class="d-none">
    <div class="mail-item-content">
        <span class="float-end">
            <!-- delete button -->
            <a href="#delete" class="btn btn-danger text-light btn-sm" id="delete-btn">
                <svg viewbox="0 0 32 32" width="12" height="12" style="margin-top: -4px;" stroke="currentColor"
                     fill="currentColor"><path
                            d="M21.3 2.7v5.3h8v2.7h-2.6v18.6H5.3V10.7H2.7V8h8V2.7h10.6z m-2.6 2.6h-5.4v2.7h5.4V5.3z m0 5.4H8v16h16V10.7h-5.3z m-6.7 2.6h2.7v10.7H12v-10.7z m8 0h-2.7v10.7h2.7v-10.7z"/></svg>
                Sil
            </a>
            <!-- delete button -->
        </span>
        <h1 class="h4 mb-3 mail-subject">#mail-subject#</h1>
        <ul class="nav nav-underline" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#html-pane"
                        type="button" role="tab" aria-controls="html-pane" aria-selected="true">HTML
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#html-inside-pane"
                        type="button" role="tab" aria-controls="html-inside-pane" aria-selected="false">HTML Kaynak
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#raw-pane" type="button"
                        role="tab" aria-controls="raw-pane" aria-selected="false">Raw
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="disabled-tab" data-bs-toggle="tab" data-bs-target="#tech-pane"
                        type="button" role="tab" aria-controls="tech-pane" aria-selected="false">Teknik Bilgi
                </button>
            </li>
        </ul>
        <div class="tab-content pt-4" id="myTabContent">
            <div class="tab-pane fade show active" id="html-pane" role="tabpanel" aria-labelledby="home-tab"
                 tabindex="0">
                <iframe class="mail-iframe" src="//mail-frame//" style="min-height: 500px; height: 80vh;"
                        frameborder="0" width="100%"></iframe>
            </div>
            <div class="tab-pane fade" id="html-inside-pane" role="tabpanel" aria-labelledby="profile-tab" tabindex="0">
                <pre style="height: 80vh; max-width: 230vh; overflow: auto;"><code class="html-inside language-html"></code></pre>
            </div>
            <div class="tab-pane fade" id="raw-pane" role="tabpanel" aria-labelledby="raw-tab" tabindex="0">
                <textarea class="raw" cols="30" rows="10" style="min-height: 500px; height: 80vh; width: 100%"
                          readonly></textarea>
            </div>
            <div class="tab-pane fade" id="tech-pane" role="tabpanel" aria-labelledby="tech-tab" tabindex="0">
                <h5>SMTP işlem Bilgileri</h5>

                <p>Bu bilgiler SMTP işlemiyle birlikte gönderilir ve e-posta başlıklarında veya gövdesinde bulunmaz.
                    SMTP hata ayıklaması için kritik olabilir ancak genel e-posta araçlarında bulunamaz.</p>

                <table class="table table-striped">
                    <thead>
                    <tr>
                        <th scope="col">Ad</th>
                        <th scope="col">Değer</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>E-Posta Kimden</td>
                        <td class="mail-from">#from#</td>
                    </tr>
                    <tr>
                        <td>Raporlanan E-Posta</td>
                        <td class="mail-reported">#reported#</td>
                    </tr>
                    </tbody>
                </table>


                <p>SMTP işlemiyle birlikte gönderilen başlık değerleri. Gerçek bir e-posta gönderirken, e-posta hizmet
                    sağlayıcısı veya posta aktarım sunucusu tarafından başlıklar değiştirilebilir.</p>

                <table class="table table-striped">
                    <thead>
                    <tr>
                        <th scope="col">Ad</th>
                        <th scope="col">Değer</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>İleti Kimliği</td>
                        <td class="mail-to">#message-id#</td>
                    </tr>
                    <!-- cc -->
                    <tr>
                        <td>CC</td>
                        <td class="mail-cc">#cc#</td>
                    </tr>
                    <tr>
                        <td>BCC</td>
                        <td class="mail-bcc">#bcc#</td>
                    </tr>
                    <tr>
                        <td>İleti Tarihi</td>
                        <td class="mail-createdat">#date#</td>
                    </tr>
                    <tr>
                        <td>İleti Konusu</td>
                        <td class="mail-subject">#subject#</td>
                    </tr>
                    <tr>
                        <td>İleti Mime Sürümü</td>
                        <td class="mail-mime-version">#mime-version#</td>
                    </tr>
                    <tr>
                        <td>İleti İçerik Türü</td>
                        <td class="mail-content-type">#content-type#</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</theme>

<script src="/assets/bower_components/jquery/dist/jquery.min.js"></script>
<script src="/assets/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/assets/js/sidebars.js"></script>
<script src="/assets/libs/highlight/highlight.min.js"></script>
<script src="/assets/libs/awesome-notifications/index.js"></script>
<script src="/assets/libs/awesome-notifications/index.js"></script>
<script src="/assets/libs/awesome-notifications/index.var.js"></script>
<script src="/assets/libs/awesome-notifications/modern.js"></script>
<script src="/assets/libs/awesome-notifications/modern.var.js"></script>
<script type="text/javascript">
    let notifier = new AWN({
        position: 'bottom-right',
        labels: {
            success: 'Başarılı',
            alert: 'Uyarı',
            error: 'Hata',
            info: 'Bilgi',
            confirm: 'Onay',
            warning: 'Uyarı',
            confirmOk: "Tamam",
            confirmCancel: "İptal"
        },
        animations: {
            show: ['animated', 'fadeIn'],
            hide: ['animated', 'fadeOut']
        }
    });

    document.addEventListener('DOMContentLoaded', (event) => {
        document.querySelectorAll('code').forEach((el) => {
            hljs.highlightElement(el);
        });
    });

    window.activeMail = null;
    window.section = null;
    window.generatedLoop = false;
    window.user = null;

    function timeAgo(time) {

        switch (typeof time) {
            case 'number':
                break;
            case 'string':
                time = +new Date(time);
                break;
            case 'object':
                if (time.constructor === Date) time = time.getTime();
                break;
            default:
                time = +new Date();
        }

        const time_formats = [
            [60, 'saniye önce', 1],
            [120, '1 dakika önce', '1 dakika sonra'],
            [3600, 'dakika', 60],
            [7200, '1 saat önce', '1 saat sonra'],
            [86400, 'saat', 3600],
            [172800, 'Dün', 'Yarın'],
            [604800, 'gün', 86400],
            [1209600, 'Geçen hafta', 'Gelecek hafta'],
            [2419200, 'hafta', 604800],
            [4838400, 'Geçen ay', 'Gelecek ay'],
            [29030400, 'ay', 2419200],
            [58060800, 'Geçen yıl', 'Gelecek yıl'],
            [2903040000, 'yıl', 29030400],
            [5806080000, 'Geçen yüzyıl', 'Gelecek yüzyıl'],
            [58060800000, 'yüzyıl', 2903040000]
        ];

        let seconds = (+new Date() - time) / 1000,
            token = 'önce',
            list_choice = 1;

        if (seconds == 0) {
            return 'Şimdi'
        }
        if (seconds < 0) {
            seconds = Math.abs(seconds);
            token = 'sonra';
            list_choice = 2;
        }
        let i = 0,
            format;
        while (format = time_formats[i++])
            if (seconds < format[0]) {
                if (typeof format[2] == 'string')
                    return format[list_choice];
                else
                    return Math.floor(seconds / format[2]) + ' ' + format[1] + ' ' + token;
            }
        return time;
    }

    function getAllUsers() {
        window.section = 'section-user';
        // loader
        $('.toploader').show();
        $.ajax({
            url: '/api/users',
            type: 'GET',
            dataType: 'json',
            beforeSend: function (xhr) {
                if (localStorage.token) {
                    xhr.setRequestHeader('Authorization', 'Bearer ' + localStorage.token);
                }
            },
            success: function (data) {
                // when empty data show empty message
                $('.toploader').delay(1750).fadeOut(10);

                $('#user-content tbody').html('');

                if (data.data === null || data.data === 0) {
                    $('#user-content tbody').append(`
                        <tr>
                            <td colspan="5" class="text-center">Kullanıcı bulunamadı.</td>
                        </tr>
                    `);
                    return;
                }
                // loop data
                $.each(data.data, function (index, value) {

                    $('#user-content tbody').append(`
                        <tr>
                            <td class="user-id">${value.id}</td>
                            <td>${value.username}</td>
                            <td>${value.role}</td>
                            <td>${value.createdat}</td>
                            <td>
                                <button class="btn btn-sm btn-danger text-light delete-user" data-id="${value.id}">Sil</button>
                                <button class="btn btn-sm btn-warning edit-user" data-id="${value.id}">Düzenle</button>
                            </td>
                        </tr>
                    `);

                });
                // remove loader
                $('#loader').remove();
            },
            error: function (data) {
                console.log(data)
            }
        });
    }

    function getAllMails() {
        window.section = 'section-mail';
        // loader
        $('.toploader').show();
        $.ajax({
            url: '/api/mails',
            type: 'GET',
            dataType: 'json',
            beforeSend: function (xhr) {
                if (localStorage.token) {
                    xhr.setRequestHeader('Authorization', 'Bearer ' + localStorage.token);
                }
            },
            success: function (data) {
                // when empty data show empty message
                $('.toploader').delay(1750).fadeOut(10);
                $('#mail-box').html('');
                if (data.data === null || data.data === 0) {
                    $('#mail-box').html(`
                        <div class="d-flex justify-content-center list-group-item pt-4 pb-4 list-group-item-action">
                            <h5 class="text-center">Gelen kutunuz boş.</h5>
                        </div>
                    `);
                    return;
                }
                // loop data
                $.each(data.data, function (index, value) {
                    const postDate = new Date(value.createdat);
                    const date = timeAgo(postDate);
                    let readClass = '';
                    if (value.isread === 0) {
                        readClass = 'text-white bg-dark-subtle';
                    }
                    if (window.activeMail === value.id) {
                        readClass = 'active';
                    }
                    $('#mail-box').append(`
                        <a href="#" data-is-read="${value.isread}" data-id="${value.id}" class="list-group-item ${readClass} list-group-item-action py-3 mail-item lh-tight" aria-current="true">
                                <small class="float-end">${date}</small>
                            <div class="col-10 mb-1 small">${value.subject}</div>
                            <div class="col-10 mb-1 small">${value.to.replace(/[\u00A0-\u9999<>\&]/gim, function (i) {
                        return '&#' + i.charCodeAt(0) + ';';
                    })}</div>
                        </a>
                    `)
                });
                // remove loader
                $('#loader').remove();
            },
            error: function (data) {
                console.log(data)
            }
        })
    }

    function getSettings() {
        const html = $("#mailbox-settings").html();
        $('#mail-content').html(html);
    }

    function encodeMyHtml(html) {
        let encodedHtml = html.replace(/\</g, "(");
        encodedHtml = encodedHtml.replace(/\>/g, ")");
        return $.parseHTML(encodedHtml);
    }

    function getMailDetail(data, thisMail) {
        window.activeMail = data.data.id;
        thisMail.removeClass('text-white bg-dark-subtle').addClass('active');
        // get template
        const html = $("#mail-item-content").html();
        $('#mail-content').html(html);
        // set data
        $('#mail-content .mail-subject').html(data.data.subject);
        $('#mail-content .mail-from').html(encodeMyHtml(data.data.from));
        $('#mail-content .mail-to').html(encodeMyHtml(data.data.to));
        $('#mail-content .mail-cc').html(encodeMyHtml(data.data.cc));
        $('#mail-content .mail-mime-version').html(encodeMyHtml(data.data.mimeversion));
        $('#mail-content .mail-content-type').html(encodeMyHtml(data.data.contenttype));
        $('#mail-content .mail-reported').html(encodeMyHtml(data.data.rcpt));
        $('#mail-content .mail-bcc').html(encodeMyHtml(data.data.bcc));
        $('#mail-content #raw-pane textarea').val(data.data.data);
        $('#mail-content .mail-createdat').html(data.data.createdat);
        // get iframe from api
        $('#mail-content .mail-iframe').attr('src', '/iframe/mails/' + data.data.id);
        // call ajax api query
        $.ajax({
            url: '/iframe/mails/' + data.data.id,
            type: 'GET',
            dataType: 'json',
            data: {
                'json': true
            },
            beforeSend: function (xhr) {
                if (localStorage.token) {
                    xhr.setRequestHeader('Authorization', 'Bearer ' + localStorage.token);
                }
            },
            success: function (data) {
                $('#mail-content .html-inside').text(data.data);
                hljs.highlightElement($('#mail-content .html-inside')[0]);
            },
            error: function (data) {
                console.log(data)
            }
        });
    }

    function checkLogin() {
        $('.toploader').delay(1750).fadeOut(10);
        if (localStorage.token) {
            // get current user ajax
            $(".permission-field").attr('style','display:none !important');
            $.ajax({
                url: '/api/users/me',
                type: 'GET',
                dataType: 'json',
                contentType: "application/json",
                accept: "application/json",
                beforeSend: function (xhr) {
                    if (localStorage.token) {
                        xhr.setRequestHeader('Authorization', 'Bearer ' + localStorage.token);
                    }
                },
                success: function (data) {
                    window.user = data.data;
                    $(".avatar-text").text(window.user.username.charAt(0).toUpperCase());
                    $(".permission-field").attr('style','');
                    $('#main').show();
                    $('#login').hide();
                    getSettings();
                    getAllMails();
                    if (!window.generatedLoop) {
                        setInterval(function () {
                            if (localStorage.token && window.section === 'section-mail') {
                                getAllMails();
                            }
                        }, 20000);
                        window.generatedLoop = true
                    }
                },
                error: function (data) {
                    $('#main').hide();
                    $('#login').show();
                    if (401 === data.status && data.responseJSON.message) {
                        notifier.warning(data.responseJSON.message);
                    }
                }
            });
        } else {
            $('#main').hide();
            $('#login').show();
        }
    }

    function userModal(id = null, username = null, role = null) {

        let options = {
            replacements: {
                modal: {
                    '{id}': id ? id : '',
                    '{username}': username ? username : '',
                }
            }
        };

        let title = 'Yeni kullanıcı oluştur';
        if (id) {
            title = 'Kullanıcı düzenle';
        }

        const roles = [
            {id: 'watcher', name: 'İzleyici', selected: role === 'watcher' ? 'selected' : ''},
            {id: 'admin', name: 'Yönetici', selected: role === 'admin' ? 'selected' : ''},
        ];

        new AWN().modal(
            '<h5 class="mb-4">' + title + '</h5>' +
            '<form id="create-or-edit-user-form">' +
            '<div class="form-group mb-4">' +
            '<input type="hidden" name="id" value="{id}">' +
            '<label for="user_username">Kullanıcı adı</label>' +
            '<input type="text" class="form-control" id="user_username" name="username" value="{username}" required placeholder="Kullanıcı adı">' +
            '</div>' +
            '<div class="form-group mb-4">' +
            '<label for="user_password">Şifre</label>' +
            '<input type="password" class="form-control" id="user_password"  name="password" ' + (id ? '' : 'required') + ' placeholder="Şifre">' +
            '</div>' +
            '<div class="form-group mb-4">' +
            '<label for="user_password_confirmation">Şifre tekrar</label>' +
            '<input type="password" class="form-control"  ' + (id ? '' : 'required') + ' id="user_password_confirmation" name="password2" placeholder="Şifre tekrar">' +
            '</div>' +
            '<div class="form-group mb-4">' +
            '<label for="user_role">Rol</label>' +
            '<select class="form-control" id="user_role" required name="role">' +
            '<option value="">Seçiniz</option>' +
            roles.map(function (role) {
                return '<option value="' + role.id + '" ' + role.selected + '>' + role.name + '</option>'
            }).join('') +
            '</select>' +
            '</div>' +
            '<button type="submit" class="btn btn-primary">Kaydet</button>' +
            '</form>',
            'modal-tiny bg-dark',
            options
        )
    }

    $(function () {

        $("#left-menu a").click(function (e) {
            e.preventDefault();
            $("#left-menu a").removeClass('active');
            $(this).addClass('active');
            $(".section").removeClass('active');
            const id = $(this).attr('href');
            window.section = id;
            if (id === 'section-settings') {
                // getGlobalSettings();
            } else if (id === 'section-user') {
                getAllUsers();
            } else if (id === 'section-mail') {
                getSettings();
                getAllMails();
            }
            $("." + id).addClass('active');
        });

        checkLogin();

        $(".logout-btn").click(function (e) {
            e.preventDefault();
            localStorage.removeItem('token');
            checkLogin();
        })

        $("#login-form").on("submit", function (e) {
            e.preventDefault();
            const username = $('#login_username').val();
            const password = $('#login_password').val();
            $.ajax({
                url: '/api/login',
                type: 'POST',
                dataType: 'json',
                data: JSON.stringify({
                    username: username,
                    password: password
                }),
                contentType: "application/json",
                accept: "application/json",
                success: function (data) {
                    localStorage.setItem('token', data.data.token);
                    checkLogin();
                    notifier.success('Giriş başarılı');
                },
                error: function (data) {
                    if (401 === data.status && data.responseJSON.message) {
                        notifier.warning(data.responseJSON.message);
                    }
                }
            })
        });

        $("#mail-content").on('change', '#select-language', function () {
            const id = $(this).val();
            $('.list-languages div').hide();
            $('#' + id).show();
        });

        $("#mail-box").on("click", ".mail-item", function (e) {
            e.preventDefault();
            $('#mail-box .mail-item').removeClass('active');
            const thisMail = $(this);
            const id = $(this).data('id');
            const isread = $(this).data('is-read');
            $.ajax({
                url: '/api/mails/' + id,
                type: 'GET',
                dataType: 'json',
                beforeSend: function (xhr) {
                    if (localStorage.token) {
                        xhr.setRequestHeader('Authorization', 'Bearer ' + localStorage.token);
                    }
                },
                success: function (data) {
                    getMailDetail(data, thisMail);
                },
                error: function (data) {
                    console.log(data)
                }
            })
        });

        $("#settings-btn").on("click", function (e) {
            e.preventDefault();
            getSettings();
        });

        $("#refresh-btn").on("click", function (e) {
            e.preventDefault();
            getAllMails();
        });

        $("#delete-all-btn").on("click", function (e) {
            e.preventDefault();
            notifier.confirm('Tüm mailleri silmek istediğinize emin misiniz?', function () {
                $('.toploader').show();
                $.ajax({
                    url: '/api/mails',
                    type: 'DELETE',
                    dataType: 'json',
                    beforeSend: function (xhr) {
                        if (localStorage.token) {
                            xhr.setRequestHeader('Authorization', 'Bearer ' + localStorage.token);
                        }
                    },
                    success: function (data) {
                        notifier.success('Tüm mailler silindi');
                        getAllMails();
                        getSettings();
                    },
                    error: function (data) {
                        if (401 === data.status && data.responseJSON.message) {
                            notifier.warning(data.responseJSON.message);
                        }
                    }
                })
            });
        });

        $("#mail-content").on("click", "#delete-btn", function (e) {
            e.preventDefault();
            notifier.confirm('Bu maili silmek istediğinize emin misiniz?', function () {
                $('.toploader').show();
                $.ajax({
                    url: '/api/mails/' + window.activeMail,
                    type: 'DELETE',
                    dataType: 'json',
                    beforeSend: function (xhr) {
                        if (localStorage.token) {
                            xhr.setRequestHeader('Authorization', 'Bearer ' + localStorage.token);
                        }
                    },
                    success: function (data) {
                        notifier.success('Mail silindi');
                        getSettings();
                        getAllMails();
                    },
                    error: function (data) {
                        if (401 === data.status && data.responseJSON.message) {
                            notifier.warning(data.responseJSON.message);
                        }
                    }
                })
            });
        });

        $("#read-all-btn").on("click", function (e) {
            e.preventDefault();
            notifier.confirm('Tüm mailleri okundu olarak işaretlemek istediğinize emin misiniz?', function () {
                $('.toploader').show();
                $.ajax({
                    url: '/api/mails',
                    type: 'PUT',
                    dataType: 'json',
                    success: function (data) {
                        notifier.success('Tüm mailler okundu olarak işaretlendi');
                        getAllMails();
                    },
                    beforeSend: function (xhr) {
                        if (localStorage.token) {
                            xhr.setRequestHeader('Authorization', 'Bearer ' + localStorage.token);
                        }
                    },
                    error: function (data) {
                        if (401 === data.status && data.responseJSON.message) {
                            notifier.warning(data.responseJSON.message);
                        }
                    }
                })
            });
        });

        /* USER : start */
        $(".create-new-user").on("click", function (e) {
            e.preventDefault();
            userModal(null, null, null);
        });

        $("#user-table").on("click", ".edit-user", function (e) {
            e.preventDefault();
            const id = $(this).data('id');
            $.ajax({
                url: '/api/users/' + id,
                type: 'GET',
                dataType: 'json',
                contentType: "application/json",
                accept: "application/json",
                beforeSend: function (xhr) {
                    if (localStorage.token) {
                        xhr.setRequestHeader('Authorization', 'Bearer ' + localStorage.token);
                    }
                },
                success: function (data) {
                    userModal(id, data.data.username, data.data.role);
                },
                error: function (data) {
                    if (401 === data.status && data.responseJSON.message) {
                        notifier.warning(data.responseJSON.message);
                    }
                }
            })
        });

        $("#user-table").on("click", ".delete-user", function (e) {
            const id = $(this).data('id');
            // delete user confirm
            notifier.confirm('Bu kullanıcıyı silmek istediğinize emin misiniz?', function () {
                $.ajax({
                    url: '/api/users/' + id,
                    type: 'DELETE',
                    dataType: 'json',
                    contentType: "application/json",
                    accept: "application/json",
                    beforeSend: function (xhr) {
                        if (localStorage.token) {
                            xhr.setRequestHeader('Authorization', 'Bearer ' + localStorage.token);
                        }
                    },
                    success: function (data) {
                        notifier.success('Kullanıcı silindi');
                        getAllUsers();
                    },
                    error: function (data) {
                        if (401 === data.status && data.responseJSON.message) {
                            notifier.warning(data.responseJSON.message);
                        }
                    }
                })
            })
        });

        $("body").on("submit", "#create-or-edit-user-form", function (e) {
            e.preventDefault();
            const id = $('#create-or-edit-user-form input[name="id"]').val();
            const username = $('#create-or-edit-user-form input[name="username"]').val();
            const password = $('#create-or-edit-user-form input[name="password"]').val();
            const password2 = $('#create-or-edit-user-form input[name="password2"]').val();
            if (password !== password2) {
                notifier.warning('Şifreler uyuşmuyor');
                return;
            }
            const role = $('#create-or-edit-user-form select[name="role"]').val();
            const data = {
                username: username,
                password: password,
                role: role
            };
            let endpoint = '/api/users';
            if (id) {
                data.id = id;
                endpoint += '/' + id;
            }
            $.ajax({
                url: endpoint,
                type: id ? 'PUT' : 'POST',
                dataType: 'json',
                data: JSON.stringify(data),
                contentType: "application/json",
                accept: "application/json",
                beforeSend: function (xhr) {
                    if (localStorage.token) {
                        xhr.setRequestHeader('Authorization', 'Bearer ' + localStorage.token);
                    }
                },
                success: function (data) {
                    notifier.success('Kullanıcı kaydedildi');
                    getAllUsers();
                    $("#awn-popup-wrapper").fadeOut(300, function () {
                        $(this).remove();
                    });
                },
                error: function (data) {
                    if (401 === data.status && data.responseJSON.message) {
                        notifier.warning(data.responseJSON.message);
                    }
                    if (400 === data.status && data.responseJSON.message) {
                        notifier.warning(data.responseJSON.message);
                    }
                }
            })
        });

        /* USER : end */


    });
</script>
</body>
</html>
